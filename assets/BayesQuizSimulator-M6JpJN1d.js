import{j as e}from"./index-D4YHQzCD.js";import{r,m as o,A as p}from"./motion-vvSlrX56.js";import"./charts-aMpLxe--.js";import"./icons-DRah0wgL.js";const b=.7;function n(t,d,a){return Math.min(a,Math.max(d,t))}function L(){return`User ${Math.floor(100+Math.random()*900)}`}function $(){const[t,d]=r.useState(.6),[a,y]=r.useState(.4),[M,j]=r.useState(1),[m,x]=r.useState(null),[h,g]=r.useState(["System initialized  Prior difficulty centred at 0.60"]),c=r.useRef(null);r.useEffect(()=>{if(c.current){const s=c.current;s.scrollTop=s.scrollHeight}},[h]);const v=t>.8,u=r.useMemo(()=>{const s=(t-.5)*120,l=n(1-a*.6,.4,1);return{offset:s,scaleX:l}},[t,a]);function f(s){x(s?"correct":"incorrect"),setTimeout(()=>x(null),900),j(i=>i+1),d(i=>{const S=s?-1:1,T=.05+a*.04;return n(i+S*T,.05,.95)}),y(i=>n(i+.08,0,1));const l=L(),w=n(s?t-(.03+a*.02):t+(.03+a*.02),.05,.95),k=`${l} answered ${s?"✔ Correct":"✖ Incorrect"} → Updating posterior → New difficulty: ${w.toFixed(2)}`;g(i=>[...i,k])}const N=`${Math.round(t*100)}%`;return e.jsxs("div",{className:"mt-4 space-y-4 text-sm",children:[e.jsxs("div",{className:"rounded-2xl bg-white/90 border border-sky-100 shadow-sm p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-sky-600 font-semibold",children:"Bayesian Logic Simulator"}),e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-slate-900",children:'"How hard is this question really?"'})]})}),e.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-3 py-2 text-[0.8rem] text-slate-800",children:"A mock multiple-choice question streaming live responses from students. BayesQuiz uses these responses to continuously update its belief about how difficult the item is."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-[0.7rem] text-slate-600",children:[e.jsx("span",{children:"True difficulty (hidden from system)"}),e.jsxs("span",{className:"font-mono text-slate-400",children:[Math.round(b*100),"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-100 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-300/50 via-amber-300/70 to-rose-300/80 opacity-60",style:{width:`${b*100}%`}})}),e.jsx("p",{className:"text-[0.65rem] text-slate-400 italic",children:"This bar is ghosted here for explanation only – the algorithm never sees the true difficulty directly."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)] gap-4 items-stretch",children:[e.jsxs("div",{className:"rounded-2xl bg-slate-900 text-slate-100 border border-slate-700 shadow-sm p-4 pb-5 space-y-3 flex flex-col lg:h-[360px]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wide text-cyan-300",children:"Estimated Difficulty Distribution"}),e.jsx("p",{className:"text-[0.7rem] text-slate-300",children:"Current belief about difficulty based on observed answers."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[0.7rem] text-slate-300",children:"Posterior mean"}),e.jsx("p",{className:"text-sm font-semibold text-emerald-300 font-mono",children:N})]})]}),e.jsxs("div",{className:"relative h-44 w-full overflow-hidden pt-2 pb-4",children:[e.jsx("div",{className:"absolute inset-x-4 bottom-4 top-6 flex items-end z-20 pointer-events-none",children:e.jsxs("div",{className:"relative w-full h-full border-b border-slate-600/60",children:[e.jsx("div",{className:"absolute left-0 -bottom-4 text-[0.6rem] text-slate-400",children:"Easy"}),e.jsx("div",{className:"absolute right-0 -bottom-4 text-[0.6rem] text-slate-400",children:"Hard"})]})}),e.jsxs(o.svg,{viewBox:"0 0 100 60",className:"absolute inset-0 mx-auto z-10",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"bayes-curve",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#22d3ee",stopOpacity:"0.85"}),e.jsx("stop",{offset:"100%",stopColor:"#0f172a",stopOpacity:"0"})]})}),e.jsx("path",{d:"M0 55 Q 20 5 40 18 T 80 32 T 100 55 L 100 60 L 0 60 Z",fill:"rgba(30, 64, 175, 0.16)",stroke:"rgba(148, 163, 184, 0.2)"}),e.jsx(o.path,{d:"M0 55 Q 20 5 40 18 T 80 32 T 100 55 L 100 60 L 0 60 Z",fill:"url(#bayes-curve)",stroke:"#22d3ee",strokeWidth:"1.4",style:{originX:.5,originY:1},animate:{x:u.offset,scaleX:u.scaleX},transition:{type:"spring",stiffness:70,damping:16}})]}),e.jsx("div",{className:"absolute left-1/2 bottom-0 -translate-x-1/2 text-[0.65rem] text-cyan-200 font-medium z-20",children:"Current belief (posterior)"})]}),e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>f(!0),className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-500/90 hover:bg-emerald-500 text-white text-[0.8rem] font-medium px-3 py-2 shadow-sm transition-colors",children:[e.jsx("span",{className:"text-xs",children:"✔"}),e.jsx("span",{children:"Student answers correctly"})]}),e.jsxs("button",{type:"button",onClick:()=>f(!1),className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-rose-500/90 hover:bg-rose-500 text-white text-[0.8rem] font-medium px-3 py-2 shadow-sm transition-colors",children:[e.jsx("span",{className:"text-xs",children:"✖"}),e.jsx("span",{children:"Student answers incorrectly"})]})]}),e.jsx("div",{className:"min-h-[2.5rem] flex items-center justify-center",children:e.jsx(p,{children:m&&e.jsx(o.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},className:"text-[0.8rem]",children:m==="correct"?e.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-400/40 whitespace-nowrap",children:"✔ Posterior updated: question estimated easier."}):e.jsx("span",{className:"px-3 py-1 rounded-full bg-rose-500/20 text-rose-200 border border-rose-400/40 whitespace-nowrap",children:"✖ Posterior updated: question estimated harder."})})})})]})]}),e.jsxs("div",{className:"rounded-2xl bg-slate-900 text-slate-100 border border-slate-700 shadow-sm p-4 flex flex-col h-64 sm:h-72 lg:h-[360px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-300",children:"Live Log (Firebase-style)"}),e.jsx("p",{className:"text-[0.7rem] text-slate-300",children:"Streaming events as each student response updates the posterior."})]}),e.jsx("span",{className:"text-[0.65rem] px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-300 border border-emerald-400/40 font-mono",children:"bayesquiz/events"})]}),e.jsx("div",{className:"flex-1 rounded-xl bg-slate-950/60 border border-slate-800 overflow-hidden text-[0.7rem] font-mono",children:e.jsx("div",{ref:c,className:"h-full overflow-y-auto px-3 py-2 space-y-1",children:h.map((s,l)=>e.jsx("div",{className:"text-slate-300/90 whitespace-pre-wrap",children:`> ${s}`},l))})})]})]}),e.jsx(p,{children:v&&e.jsxs(o.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},className:"rounded-xl border border-amber-300/80 bg-amber-50/90 px-3 py-2 flex items-start gap-2 text-[0.75rem] text-amber-900 shadow-sm",children:[e.jsx("span",{className:"mt-0.5 text-xs",children:"⚠"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Alert: topic flagged for review"}),e.jsx("p",{children:"Estimated difficulty has climbed above 80% failure. BayesQuiz would highlight this skill for curriculum intervention."})]})]})})]})}export{$ as default};
