import{j as e}from"./index-D4YHQzCD.js";import{r,m as _}from"./motion-vvSlrX56.js";import"./charts-aMpLxe--.js";import"./icons-DRah0wgL.js";const F="/assets/flappy_pic-prDq9LV3.png",q=()=>{const[d,j]=r.useState(!1),[a,g]=r.useState(!1),[b,S]=r.useState(0),[P,$]=r.useState(null),[G,N]=r.useState(250),[,T]=r.useState(0),p=r.useRef(),s=r.useRef({y:250,velocity:0}),u=r.useRef([]),c=r.useRef(0),k=.5,I=-9,m=60,x=180,L=3,y=34,v=450,E=120,M=.15,R=()=>{if(a){A();return}d||j(!0),s.current.velocity=I},A=()=>{c.current>0&&$(c.current),g(!1),j(!1),S(0),N(250),s.current={y:250,velocity:0},u.current=[],c.current=0};return r.useEffect(()=>{const n=o=>{(o.code==="Space"||o.code==="ArrowUp")&&(o.preventDefault(),R())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[a,d]),r.useEffect(()=>{if(!d||a)return;let n=performance.now(),o=0;const l=f=>{const i=(f-n)/16.67;if(n=f,s.current.velocity+=k*i,s.current.y+=s.current.velocity*i,s.current.y>v-y||s.current.y<0){g(!0);return}if(o+=i,o>90){const t=Math.random()*(v-x-100)+50;u.current.push({x:400,gapY:t,scored:!1}),o=0}const h=[];u.current.forEach(t=>{if(t.x-=L*i,c.current>=25){t.chompPhase==null&&(t.chompPhase=0),t.chompPhase+=M*i;const z=(Math.sin(t.chompPhase)+1)/2;t.gapSize=E+(x-E)*z}else t.gapSize=x;const w=50,C=t.gapY,D=t.gapSize??x;if(t.x<w+y&&t.x+m>w&&(s.current.y<C||s.current.y+y>C+D)){g(!0);return}!t.scored&&t.x+m<w&&(t.scored=!0,c.current+=1,S(c.current)),t.x>-m&&h.push(t)}),u.current=h,N(s.current.y),T(t=>t+1),p.current=requestAnimationFrame(l)};return p.current=requestAnimationFrame(l),()=>{p.current&&cancelAnimationFrame(p.current)}},[d,a]),e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-3xl mx-auto",children:e.jsxs("div",{className:"glass rounded-3xl p-4 sm:p-8 shadow-xl w-full",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:["Score: ",b]}),P!==null&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Last score: ",P]})]}),a&&e.jsx("button",{onClick:A,className:"px-6 py-2 bg-primary-600 text-white rounded-full hover:bg-primary-700 transition-colors",children:"Play Again"})]}),e.jsxs("div",{onClick:R,className:"relative w-full h-[480px] sm:h-[520px] bg-gradient-to-b from-blue-200 to-blue-100 rounded-2xl overflow-hidden cursor-pointer select-none",style:{touchAction:"none"},children:[e.jsx(_.img,{src:F,alt:"Flappy Bird",className:"absolute w-[40px] h-[40px] object-contain drop-shadow-md",style:{left:"50px",top:`${G}px`,transform:`rotate(${Math.min(Math.max(s.current.velocity*3,-30),90)}deg)`,willChange:"transform"}}),u.current.map((n,o)=>{const l=n.gapY,f=n.gapSize??x,h=b>=15?"bg-red-600 border-red-700":"bg-green-600 border-green-700";return e.jsxs("div",{children:[e.jsx("div",{className:`absolute border-4 rounded-lg ${h}`,style:{left:`${n.x}px`,top:0,width:`${m}px`,height:`${l}px`,willChange:"transform"}}),e.jsx("div",{className:`absolute border-4 rounded-lg ${h}`,style:{left:`${n.x}px`,top:`${l+f}px`,width:`${m}px`,height:`${v-l-f}px`,willChange:"transform"}})]},o)}),!d&&!a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-4 drop-shadow-lg",children:"Click or Press SPACE"}),e.jsx("div",{className:"text-xl text-white/90 drop-shadow",children:"to start!"})]})}),a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-white mb-4 drop-shadow-lg",children:"Game Over!"}),e.jsxs("div",{className:"text-2xl text-white/90 mb-6 drop-shadow",children:["Final Score: ",b]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-green-700 to-green-600"})]})]})})};export{q as default};
